{% extends 'dashboard.html' %}

{% block content %}
<div class="main-content">
  <h1>Billings</h1>
  <p>Manage billing information and transactions.</p>

  <!-- Button to add a new payment -->
  <button onclick="addPayment()" style="padding: 10px 20px; margin-bottom: 20px; background-color: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer;">Add New Payment</button>

  <!-- Filters Section -->
  <div style="margin-bottom: 20px;">
    <label for="payment-method" style="margin-right: 10px;">Filter by Payment Method:</label>
    <select id="payment-method" onchange="filterPayments()" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
      <option value="all">All</option>
      <option value="cash">Cash</option>
      <option value="credit_card">Credit Card</option>
      <option value="digital_wallet">Digital Wallet</option>
    </select>
  </div>

  <!-- Billings Table -->
  <table style="width: 100%; border-collapse: collapse; margin-top: 20px; box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);">
    <thead style="background-color: #f2f2f2; text-align: left;">
      <tr>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">#</th>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">Payment ID</th>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">Amount</th>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">Payment Method</th>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">Date</th>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">Ticket ID</th>
        <th style="padding: 10px; border-bottom: 1px solid #ddd;">Actions</th>
      </tr>
    </thead>
    <tbody id="billing-table">
      <!-- Example static rows for now; replace with database records later -->
      <tr>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">1</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">101</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">$50.00</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">Cash</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">2024-12-15</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">T123</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">
          <button style="padding: 5px 10px; margin-right: 5px; background-color: #2196f3; color: white; border: none; border-radius: 3px; cursor: pointer;">Edit</button>
          <button style="padding: 5px 10px; background-color: #f44336; color: white; border: none; border-radius: 3px; cursor: pointer;">Delete</button>
        </td>
      </tr>
      <tr>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">2</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">102</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">$25.00</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">Credit Card</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">2024-12-15</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">T124</td>
        <td style="padding: 10px; border-bottom: 1px solid #ddd;">
          <button style="padding: 5px 10px; margin-right: 5px; background-color: #2196f3; color: white; border: none; border-radius: 3px; cursor: pointer;">Edit</button>
          <button style="padding: 5px 10px; background-color: #f44336; color: white; border: none; border-radius: 3px; cursor: pointer;">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<script>
  function addPayment() {
    alert("Add Payment functionality will be implemented!");
    // Replace with a modal or form for adding new payments
  }

  function filterPayments() {
    const filter = document.getElementById('payment-method').value.toLowerCase();
    const table = document.getElementById('billing-table');
    const rows = table.getElementsByTagName('tr');

    for (let i = 0; i < rows.length; i++) {
      const methodCell = rows[i].getElementsByTagName('td')[3]; // Payment Method column
      if (methodCell) {
        const method = methodCell.textContent.toLowerCase();
        if (filter === 'all' || method.includes(filter)) {
          rows[i].style.display = '';
        } else {
          rows[i].style.display = 'none';
        }
      }
    }
  }
</script>
{% endblock %}
